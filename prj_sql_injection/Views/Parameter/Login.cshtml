
@{
    ViewBag.Title = "Login";
}

<h2 class="mb-3">登入</h2>

@using (Ajax.BeginForm("Login", "Parameter", new AjaxOptions
{
    OnSuccess = "getResult"

}))
{

    <table>
        <thead></thead>
        <tbody>
            <tr>
                <td><label for="username">員工姓名： </label></td>
                <td><input name="userName" type="text" id="username" /></td>
            </tr>
            <tr>
                <td><label for="password">員工密碼： </label></td>
                <td><input name="password" type="text" id="password" /></td>
            </tr>
            <tr>
                <td><button>登入</button></td>
            </tr>
        </tbody>
    </table>
}

<form action="/Parameter/CustomerList" method="post" id="searchForm">
    <input type="hidden" id="employeeIdInput" name="employeeId"/>
</form>

<script>
    function getResult(data) {
        alert(data.Message);
        if (data.Success) {
            let employeeId = data.Data.EmployeeID;
            document.getElementById('employeeIdInput').value = employeeId;
            document.getElementById('searchForm').submit();
        } else {
            location.reload();
        }
    }
</script>